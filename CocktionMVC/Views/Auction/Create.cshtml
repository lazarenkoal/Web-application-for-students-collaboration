@using CocktionMVC.Models

@{
    ViewBag.Title = "Создать аукцион";
}
<script src="~/Scripts/jquery-2.1.3.min.js"></script>
<h3>Создай свой аукцион!</h3>
@model AuctionModels.Product

<div id="formContainer">
<form>
    <p>Имя</p>
    <input type="text" id="Name" name="Name" />
    <p>Описание</p>
    <input type="text" id="Description" name="Description" />
    <p>Категория</p>
    <input type="text" id="Category" name="Category" />
    <p>Часов</p>
    <input type="text" id="Hours" name="Hours" />
    <p>Минут</p>
    <input type="text" id="Minutes" name="Minutes" />
    <p></p>
    <input type="file" id="file" />
    <input type="button" id="creator" class="btn btn-default" value="Создать аукцион" />
</form>
</div>
<script>
    
    //Добавить верификацию данных
    $('#creator').click(function () {
        var formData = new FormData();
        var req = new XMLHttpRequest;
        formData.append("Name", $('#Name').val());
        formData.append("Description", $('#Description').val());
        formData.append("Category", $('#Category').val());
        var time = new Date();
        formData.append("Hours", $('#Hours').val());
        formData.append("Minutes", $('#Minutes').val());
        var fileInput = document.getElementById('file');
        var filename1 = fileInput.files[0].name;
        formData.append(fileInput.files[0].name, fileInput.files[0]);
        $('#formContainer').empty();
        $('#formContainer').append('<p>загрузка в процессе</p>');
        req.open("POST", "/FileSaver/CreateAuction");
        req.send(formData);
        req.onreadystatechange = function () {
            if (req.readyState == 4 && req.status == 200) {
                $('#formContainer').empty();
                $('#formContainer').append('<p>' + req.responseText + '</p>');
            }
        }
    });
</script>
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}

